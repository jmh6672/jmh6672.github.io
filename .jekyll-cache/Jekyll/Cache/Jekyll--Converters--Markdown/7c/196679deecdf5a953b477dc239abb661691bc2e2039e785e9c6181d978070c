I"j<p>회사 공용서버의 kubernetes 환경에 이미지를 올릴 공간이 없어서 다른서버에 docker를 설치해서 remote docker 연결 하려고 한다.
개인 PC에 하려고 했지만 PC 성능이 좋지 못하다.. 내 윈도우에는 설치하기 싫어! 조만간 윈도우 docker 지원도 중지한다고 하던데, 암튼 쾌적한 환경을 원한다.</p>

<h2 id="yum-으로-설치">yum 으로 설치</h2>
<p>먼저 yum을 업데이트하고 패키지를 설치하자</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum -y update
yum install -y yum-utils
</code></pre></div></div>

<p>yum 환경에 docker 패키지가 있는 저장소를 등록해준다</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
yum-config-manager --enable docker-ce-nightly
</code></pre></div></div>

<p>이제 docker 패키지를 설치!</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum -y install docker-ce docker-ce-cli containerd.io
</code></pre></div></div>

<p>설치가 끝났으면 docker를 실행해보자</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl start docker

# 서버 부팅시 docker 자동실행 등록
systemctl enable docker

# 실행되었는지 확인
systemctl status docker
</code></pre></div></div>

<h2 id="remote-docker-사용">Remote Docker 사용</h2>
<p>docker가 설치된 리눅스 서버에서 docker 명령어를 사용하면 잘될것이다.
하지만, 다른 서버에서 원격으로 docker를 사용하려고 하면 안된다.
왜냐하면, 기본 설정된 systemctl 설정으로 docker 를 실행하면 외부 포트를 열어주지 앟는다.
그래서 system 데몬으로 docker의 포트를 열어줘야 한다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/lib/systemd/system/docker.service
</code></pre></div></div>
:ET